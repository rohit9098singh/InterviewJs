<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debounce Example</title>
</head>

<body>

    <h2>Debounced Search</h2>
    <input type="text" placeholder="Type to search..." onkeyup="betterFunction(event)" />

    <script>
        let count = 0;

        const getData = async (e) => {
            const query = e.target.value;
            if (!query) return;
            console.log(`API Call #${++count} with query: ${query}`);
            const response = await fetch(
                `https://jsonplaceholder.typicode.com/posts?q=${query}`
            );

            const data = await response.json();
            console.log("Response Data:", data);
        };

        // Debounce utility
        const doSomeMagic = (fn, delay) => {
            let timer;
            return function (...args) {
                clearTimeout(timer);
                timer = setTimeout(() => {
                    fn.apply(this, args);
                }, delay);
            };
        };

        // Debounced function
        const betterFunction = doSomeMagic(getData, 300);
    </script>

</body>

</html>